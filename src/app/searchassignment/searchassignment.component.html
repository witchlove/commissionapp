<div class="row">
  <div class="col-md-8">
    <h2>Search Assignments</h2>
    <form>
      <div class="form-group">
        <label style="width: 100px" for="ordernumber">SalesOrderID</label>
        <input type="text" id="ordernumber" name="ordernumber" [(ngModel)]="orderNumber" />
      </div>
      <div class="form-group">
        <label style="width: 100px" for="orderlinenumber">SalesOrder Line</label>
        <input type="text" id="orderlinenumber" name="orderlinenumber" [(ngModel)]="orderLineNumber" />
      </div>
      <button type="submit" (click)="search()" class="btn btn-default">Search</button>
      <button class="btn btn-danger" (click)="clear()">Clear search </button>
    </form>
  </div>
</div>
<div class="row">
  <div class="col-md-8">
    <h2>Relink order</h2>
    <form>
      <div class="form-group">
        <label style="width: 100px" for="relinkOrderNumber">SalesOrderID</label>
        <input type="text" id="relinkOrderNumber" name="relinkOrderNumber" [(ngModel)]="relinkOrderNumber" />
      </div>
      <div class="form-group">
        <label style="width: 100px" for="relinkOrderLineNumber">SalesOrder Line</label>
        <input type="text" id="relinkOrderLineNumber" name="relinkOrderLineNumber" [(ngModel)]="relinkOrderLineNumber" />
      </div>
      <button type="submit" (click)="relinkOrder()" class="btn btn-default">Relink</button>
      <button class="btn btn-danger" (click)="clear()">Clear search </button>
    </form>
  </div>
</div>
<div class="row" style="margin-top: 30px;" *ngIf="dataLoaded > 0">
  <div class="col-md-12">
    <h2>Search results</h2>
    <table class="table table-bordered">
      <thead>
      <tr>
        <th># id</th>
        <th>assignmentRuleID</th>
        <th>salesOrderID</th>
        <th>salesOrderLineNr</th>
        <th>SalesPersons</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let assignment of results">
        <td>{{ assignment.assignmentID}}</td>
        <td>{{ assignment.assignmentRuleID}}</td>
        <td>{{ assignment.salesOrderID}}</td>
        <td>{{ assignment.salesOrderLineNr}}</td>
        <td>
          <table class="table">
            <tr *ngFor="let assignee of assignment.assignmentAssignees">
              <td>{{ assignee.assignmentID }}</td>
              <td>{{ assignee.salesVolumePercentage}}</td>
              <td>{{ assignee.commissionPercentage}}</td>
              <td>{{ assignee.salesPerson.familyName}} / {{ assignee.salesPerson.firstName}} /{{ assignee.salesPerson.reference}} </td>
            </tr>
          </table>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
